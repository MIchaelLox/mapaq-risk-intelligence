<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MAPAQ Risk Dashboard (MVP)</title>
</head>
<body>
<h1>MAPAQ Risk Dashboard - MVP</h1>

<form id="predict-form">
    <label>
        Theme:
        <input name="theme" value="Sushi">
    </label><br>
    <label>
        Staff count:
        <input type="number" name="staff_count" value="10">
    </label><br>
    <label>
        Infractions history:
        <input type="number" name="infractions_history" value="1">
    </label><br>
    <label>
        Kitchen size (mÂ²):
        <input type="number" name="kitchen_size" value="40">
    </label><br>
    <label>
        Region:
        <input name="region" value="Montreal">
    </label><br>
    <label>
        Inspection date:
        <input type="date" name="inspection_date" value="2024-11-01">
    </label><br><br>

    <button type="submit">Simulate risk</button>
</form>

<h2>Result</h2>
<pre id="result"></pre>

<script>
    const form = document.getElementById('predict-form');
    const resultEl = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const formData = new FormData(form);
        const payload = Object.fromEntries(formData.entries());

        payload.staff_count = Number(payload.staff_count);
        payload.infractions_history = Number(payload.infractions_history);
        payload.kitchen_size = Number(payload.kitchen_size);

        const resp = await fetch('/api/v1/predict', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(payload),
        });

        const data = await resp.json();
        resultEl.textContent = JSON.stringify(data, null, 2);
    });
</script>
</body>
</html>

